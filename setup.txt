# Download repo
git clone https://github.com/tanshinjie/database_project
# wget https://github.com/tanshinjie/database_project/archive/master.zip

# Install npm
curl -sL https://deb.nodesource.com/setup_15.x | sudo -E bash -
sudo apt-get install -y nodejs

# Install project dependencies
cd betterread-ui
npm install

cd ../betterread-server
npm install

# Install nginx 
sudo apt update && sudo apt upgrade -y
sudo apt install nginx -y

# Configure nginx
cd ~/database_project
sudo cp nginx_config /etc/nginx/sites-available/
sudo ln -s /etc/nginx/sites-available/nginx_config /etc/nginx/sites-enabled
sudo rm /etc/nginx/sites-available/default
sudo rm /etc/nginx/sites-enabled/default
sudo service nginx restart

# Build frontend
sudo mkdir /var/www/betterread
cd ~/database_project/betterread-ui/
npm run build 
sudo cp -r build /var/www/betterread/

# Run backend
sudo npm install pm2 -g 
cd ~/database_project/betterread-server/
sudo pm2 start app.js
